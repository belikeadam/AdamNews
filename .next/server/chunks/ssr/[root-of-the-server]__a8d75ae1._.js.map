{"version":3,"sources":["../../../../node_modules/%40swc/helpers/cjs/_interop_require_default.cjs","../../../../src/app/home-client.tsx/__nextjs-internal-proxy.mjs","../../../../src/app/page.tsx","../../../../src/components/reader/HeroArticle.tsx"],"sourcesContent":["\"use strict\";\n\nfunction _interop_require_default(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\nexports._ = _interop_require_default;\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/home-client.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/home-client.tsx\",\n    \"default\",\n);\n","import { Metadata } from 'next'\nimport TechBar from '@/components/layout/TechBar'\nimport HeroArticle from '@/components/reader/HeroArticle'\nimport ArticleCard from '@/components/reader/ArticleCard'\nimport ArchCallout from '@/components/shared/ArchCallout'\nimport { getArticles, getTrendingArticles, getCategories } from '@/lib/api/strapi'\nimport HomeClient from './home-client'\n\nexport const revalidate = 60\n\nexport const metadata: Metadata = {\n  title: 'KollectNews | Modern News Platform',\n  description:\n    'A modern news platform built with Next.js, Strapi, and Stripe. Showcasing ISR, server components, and real-time content management.',\n}\n\nexport default async function HomePage() {\n  let articles, trending, categories\n\n  try {\n    ;[articles, trending, categories] = await Promise.all([\n      getArticles({ pageSize: 12 }),\n      getTrendingArticles(),\n      getCategories(),\n    ])\n  } catch {\n    // Strapi not available — render with demo data\n    return <HomeFallback />\n  }\n\n  const featuredArticle = trending.data[0] || articles.data[0]\n  const gridArticles = articles.data.filter(\n    (a) => a.id !== featuredArticle?.id\n  )\n\n  return (\n    <>\n      <TechBar\n        badges={[\n          { label: 'ISR \\u00b7 60s', tooltip: 'Page revalidates every 60 seconds', variant: 'warning' },\n          { label: 'Strapi REST', tooltip: 'Content fetched from Strapi v4 REST API' },\n          { label: 'Next.js App Router', tooltip: 'Using React Server Components' },\n          { label: 'TypeScript', tooltip: 'Fully typed with TypeScript' },\n        ]}\n      />\n\n      <div className=\"max-w-7xl mx-auto px-4 py-6 pb-20 md:pb-6\">\n        <ArchCallout\n          apiCall=\"GET /api/articles?populate=*&sort=publishedAt:desc\"\n          caching=\"ISR revalidate: 60s, Redis cache-aside with 60s TTL\"\n          auth=\"Public — no authentication required\"\n          rationale=\"ISR balances freshness with performance. Stale content served while revalidating in background.\"\n          className=\"mb-6\"\n        />\n\n        {featuredArticle && (\n          <section className=\"mb-8\">\n            <HeroArticle article={featuredArticle} />\n          </section>\n        )}\n\n        <HomeClient\n          articles={gridArticles}\n          categories={categories.data}\n          trending={trending.data}\n        />\n      </div>\n    </>\n  )\n}\n\nfunction HomeFallback() {\n  return (\n    <>\n      <TechBar\n        badges={[\n          { label: 'ISR \\u00b7 60s', tooltip: 'Page revalidates every 60 seconds', variant: 'warning' },\n          { label: 'Strapi REST', tooltip: 'Content fetched from Strapi v4 REST API' },\n          { label: 'Next.js App Router', tooltip: 'Using React Server Components' },\n        ]}\n      />\n      <div className=\"max-w-7xl mx-auto px-4 py-12 text-center\">\n        <h1 className=\"text-3xl font-bold text-[var(--text)] mb-4\">\n          KollectNews\n        </h1>\n        <p className=\"text-[var(--muted)] mb-6 max-w-xl mx-auto\">\n          A modern news platform built with Next.js 14 App Router, Strapi v4 CMS,\n          NextAuth.js, and Stripe. Start the Strapi CMS to see articles here.\n        </p>\n        <div className=\"grid sm:grid-cols-2 lg:grid-cols-3 gap-4 mt-8\">\n          {[1, 2, 3, 4, 5, 6].map((i) => (\n            <div\n              key={i}\n              className=\"bg-[var(--surface)] border border-[var(--border)] rounded overflow-hidden\"\n            >\n              <div className=\"aspect-[16/9] bg-[var(--surface-2)] animate-pulse\" />\n              <div className=\"p-4 space-y-2\">\n                <div className=\"h-4 bg-[var(--surface-2)] rounded animate-pulse w-3/4\" />\n                <div className=\"h-3 bg-[var(--surface-2)] rounded animate-pulse\" />\n                <div className=\"h-3 bg-[var(--surface-2)] rounded animate-pulse w-1/2\" />\n              </div>\n            </div>\n          ))}\n        </div>\n        <div className=\"mt-8 bg-[var(--surface)] border border-[var(--border)] rounded p-6\">\n          <h2 className=\"font-semibold text-[var(--text)] mb-2\">\n            Getting Started\n          </h2>\n          <code className=\"text-sm text-[var(--muted)]\">\n            docker compose up &mdash; starts Postgres, Redis, Strapi &amp; Next.js\n          </code>\n        </div>\n      </div>\n    </>\n  )\n}\n","import Link from 'next/link'\r\nimport Image from 'next/image'\r\nimport Badge from '@/components/ui/Badge'\r\nimport RenderBadge from '@/components/shared/RenderBadge'\r\nimport { formatDate, getStrapiMediaUrl } from '@/lib/utils'\r\nimport type { Article } from '@/types'\r\n\r\ninterface HeroArticleProps {\r\n  article: Article\r\n}\r\n\r\nexport default function HeroArticle({ article }: HeroArticleProps) {\r\n  const { attributes: a } = article\r\n  const coverUrl = getStrapiMediaUrl(\r\n    a.cover?.data?.attributes?.formats?.large?.url ||\r\n      a.cover?.data?.attributes?.url\r\n  )\r\n  const authorName = a.author?.data?.attributes?.name\r\n  const categoryName = a.category?.data?.attributes?.name\r\n\r\n  return (\r\n    <Link href={`/articles/${a.slug}`} className=\"block group\">\r\n      <div className=\"relative rounded-lg overflow-hidden bg-[var(--surface-2)] aspect-[21/9] sm:aspect-[3/1]\">\r\n        <Image\r\n          src={coverUrl}\r\n          alt={a.title}\r\n          fill\r\n          sizes=\"100vw\"\r\n          className=\"object-cover group-hover:scale-105 transition-transform duration-300\"\r\n          priority\r\n        />\r\n        <div className=\"absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent\" />\r\n\r\n        <div className=\"absolute bottom-0 left-0 right-0 p-6 sm:p-8\">\r\n          <div className=\"flex items-center gap-2 mb-3\">\r\n            {categoryName && (\r\n              <Badge variant=\"accent\">{categoryName}</Badge>\r\n            )}\r\n            {a.premium && <Badge variant=\"warning\">Premium</Badge>}\r\n            <RenderBadge strategy=\"ISR\" />\r\n          </div>\r\n          <h1 className=\"text-2xl sm:text-3xl lg:text-4xl font-bold text-white mb-2 line-clamp-2\">\r\n            {a.title}\r\n          </h1>\r\n          {a.excerpt && (\r\n            <p className=\"text-white/80 text-sm sm:text-base line-clamp-2 max-w-2xl mb-3\">\r\n              {a.excerpt}\r\n            </p>\r\n          )}\r\n          <div className=\"flex items-center gap-3 text-white/70 text-sm\">\r\n            {authorName && (\r\n              <span className=\"bg-white/20 px-2 py-0.5 rounded text-white text-xs\">\r\n                {authorName}\r\n              </span>\r\n            )}\r\n            {a.publishedAt && <span>{formatDate(a.publishedAt)}</span>}\r\n            {a.readTime && <span>{a.readTime}</span>}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Link>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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","ignoreList":[0,1]}